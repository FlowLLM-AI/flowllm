# 🎯 功能特性详解

## 核心功能

### 1. 🎨 可爱的桌面宠物

- **手绘风格小狗**: 使用 SVG 绘制的可爱小狗形象
- **多种表情**: 根据不同状态显示不同表情
  - 正常状态: 圆眼睛，嘴巴微笑
  - 拖拽时: 眼睛变小，显示"汪~"
  - 开心/跑步: 吐舌头，笑容更大
- **流畅动画**: CSS3 动画效果，跑步时有弹跳效果

### 2. 🖱️ 交互方式

#### 鼠标操作
- **左键单击**: 打开 AI 对话窗口
- **左键双击**: 切换跑步/停止状态
- **左键拖拽**: 移动小狗到任意位置
- **右键点击**: 打开快捷菜单

#### 键盘操作
- **回车**: 发送消息
- **Shift+回车**: 输入框内换行

### 3. 💬 AI 对话系统

#### 对话特性
- **流式响应**: 实时显示 AI 回答，无需等待
- **独立气泡**: 对话输入和 AI 回答分开显示
- **自动扩展**: 回答气泡根据内容自动调整大小
- **颜色区分**: 不同类型的内容用不同颜色显示
  - 普通回答: 深灰色
  - 思考过程: 橙色 (🤔)
  - 错误信息: 红色 (❌)
  - 工具调用: 蓝色 (🔧)

#### API 支持
- OpenAI GPT-3.5/4
- Anthropic Claude
- 阿里云通义千问 (DashScope)
- 任何兼容 OpenAI API 的服务
- 本地模型 (Ollama, LocalAI 等)

### 4. 🏃 跑步动画

- **双向跑步**: 从左到右，从右到左自动转向
- **边缘检测**: 到达屏幕边缘自动转向
- **弹跳效果**: 跑步时的可爱弹跳动画
- **速度控制**: 可调节跑步速度 (默认每步 8px)

### 5. 📌 窗口管理

#### 窗口特性
- **置顶显示**: 始终在所有窗口之上
- **透明背景**: 只显示小狗，背景完全透明
- **无边框**: 无标题栏和边框
- **不在任务栏**: 不占用任务栏位置
- **跨平台**: macOS / Windows / Linux

#### 位置管理
- **记忆位置**: 拖拽后保持在当前位置
- **回到角落**: 一键返回屏幕右下角
- **随机漫步**: 随机移动到屏幕任意位置
- **边界限制**: 不会移出屏幕范围

### 6. 🎯 右键菜单

快捷操作菜单包含:
- 💬 和我聊天 - 打开对话框
- 🏠 回到角落 - 移动到右下角
- 🚶 随机漫步 - 随机移动
- 🏃/🛑 跑步控制 - 开始/停止跑步
- 👋 再见 - 退出应用

## 技术特性

### 前端技术

- **React 18**: 最新的 React 版本
- **TypeScript**: 完整的类型支持
- **Vite**: 快速的开发构建工具
- **CSS3**: 现代 CSS 特性和动画
- **SVG**: 矢量图形，任意缩放不失真

### 桌面技术

- **Electron**: 跨平台桌面框架
- **IPC 通信**: 主进程与渲染进程通信
- **无边框窗口**: 自定义窗口外观
- **透明窗口**: 实现桌面宠物效果

### AI 集成

- **流式 API**: 支持 SSE (Server-Sent Events)
- **并发控制**: AbortController 取消请求
- **错误处理**: 完善的错误捕获和显示
- **类型安全**: TypeScript 接口定义

## 性能优化

### 渲染优化
- **React.memo**: 避免不必要的重渲染
- **useCallback**: 缓存事件处理函数
- **useRef**: 避免状态变化导致重渲染
- **requestAnimationFrame**: 流畅的动画

### 内存优化
- **组件卸载清理**: 清理定时器和事件监听
- **Stream 取消**: 关闭气泡时终止 API 请求
- **SVG 复用**: 减少 DOM 节点

### 体验优化
- **双击检测**: 精确的双击判断 (300ms)
- **拖拽阈值**: 移动 5px 以上才认为是拖拽
- **自动聚焦**: 打开对话框自动聚焦输入框
- **滚动到底**: 新消息自动滚动到可见区域

## 扩展性

### 易于定制

1. **修改外观**: 编辑 SVG 和 CSS
2. **更换 AI**: 修改 API 配置
3. **添加功能**: React 组件模块化
4. **自定义菜单**: 轻松添加菜单项

### 可扩展特性

- 支持多个宠物实例
- 可添加更多动画效果
- 可集成本地数据存储
- 可添加系统通知
- 可实现宠物间交互

## 对比 Python 版本

### 相同功能 ✅
- 可拖拽移动
- AI 对话功能
- 流式响应显示
- 跑步动画
- 右键菜单
- 置顶显示

### 改进之处 🚀
- **更好的跨平台**: Electron 比 PyQt6 更易部署
- **更现代的 UI**: React + CSS3 更灵活
- **类型安全**: TypeScript 避免运行时错误
- **更快的开发**: Vite HMR 即时预览
- **更小的体积**: 打包后体积更小
- **Web 技术栈**: 更多开发者熟悉

### 不同之处 🔄
- **宠物形象**: 小狗 vs 小猫
- **绘制方式**: SVG vs QPainter
- **UI 框架**: React vs PyQt6
- **语言**: TypeScript vs Python

## 未来计划 🔮

- [ ] 多语言支持
- [ ] 主题切换 (深色/浅色)
- [ ] 更多宠物形象
- [ ] 本地对话历史
- [ ] 自定义快捷键
- [ ] 屏幕边缘吸附
- [ ] 更多动画效果
- [ ] 语音对话支持
- [ ] 插件系统

